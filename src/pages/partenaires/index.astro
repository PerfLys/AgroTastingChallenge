---
import Layout from "@/layouts/Layout.astro";
import PageHeader from "@/components/elements/PageHeader.astro";
import OptimizedImg from "@/components/elements/OptimizedImg.astro";
import partenairesData from "@/content/pages/partenaires.json";

const {
  titleFr,
  partnersDescriptionFr,
  partnersIntroFr,
  partnersList = [],
} = partenairesData as any;
---

<Layout title={titleFr || "Partenaires"}>
  <div class="site-container mx-auto px-4 mt-10">
    <PageHeader
      title={titleFr || "Partenaires"}
      description={
        partnersDescriptionFr ||
        "Merci à celles et ceux qui soutiennent l’Agro Tasting Challenge."
      }
    />

    <div class="inner-container mx-auto">
      <section class="rounded-3xl border border-dashed border-neutral-200 dark:border-neutral-700 bg-white/70 dark:bg-neutral-950/30 backdrop-blur-sm p-6 sm:p-8">
        {partnersIntroFr && (
          <p class="text-sm leading-7 text-neutral-700 dark:text-neutral-300 whitespace-pre-line">
            {partnersIntroFr}
          </p>
        )}

        <div class="mt-6 grid grid-cols-2 sm:grid-cols-3 gap-3">
          {partnersList &&
            partnersList.map((partner: any) => (
              <a
                href={partner?.slug ? `/partenaires/${partner.slug}` : "#"}
                class="block group rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-white/60 dark:bg-neutral-950/20 p-5 text-center transition-colors hover:border-primary/50"
              >
                {partner?.logo ? (
                  <OptimizedImg
                    src={partner.logo}
                    alt={partner?.name || "Logo partenaire"}
                    width={256}
                    height={64}
                    class="mx-auto h-16 w-auto object-contain mb-3"
                    loading="lazy"
                    sizes="(max-width: 640px) 50vw, 33vw"
                    fit="contain"
                    quality={70}
                  />
                ) : (
                  <div class="h-16 flex items-center justify-center text-4xl text-neutral-300">
                    <span class="sr-only">Logo</span>
                    ❖
                  </div>
                )}
                <div class="text-sm font-medium text-neutral-600 dark:text-neutral-400 group-hover:text-primary transition-colors">
                  {partner?.name}
                </div>
              </a>
            ))}
        </div>
      </section>
    </div>
  </div>
</Layout>


